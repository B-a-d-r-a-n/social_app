import{Ab as G,Ac as P,Ca as x,Fa as i,K as f,P as g,Q as h,T as C,Za as p,_b as $,bb as y,cb as S,da as b,db as o,ea as v,eb as r,fb as a,fc as F,kb as _,kc as s,lc as E,nc as H,oc as L,pc as N,rb as m,rc as u,sb as d,tb as w,tc as j,vc as D,wc as M,xb as I,zb as k}from"./chunk-SVYGHPLO.js";import"./chunk-TMC7WMLO.js";var T=(()=>{class t{constructor(e){this._HttpClient=e}createComment(e){return this._HttpClient.post(`${s.baseUrl}comments`,e)}getPostComments(e){return this._HttpClient.get(`${s.baseUrl}posts/${e}/comments`)}updatePostComment(e,n){return this._HttpClient.put(`${s.baseUrl}comments/${e}`,n)}deleteComment(e){return this._HttpClient.delete(`${s.baseUrl}comments/${e}`)}static{this.\u0275fac=function(n){return new(n||t)(g(F))}}static{this.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var V=(t,l)=>l._id;function A(t,l){if(t&1&&(o(0,"div",2)(1,"div",11),a(2,"img",12),o(3,"h3",13),m(4),r(),o(5,"span",14),m(6),k(7,"date"),r()(),o(8,"p",15),m(9),r()()),t&2){let e=l.$implicit;i(2),p("src",e.commentCreator.photo,x),i(2),d(e.commentCreator.name),i(2),d(G(7,4,e.createdAt)),i(3),w(" ",e.content," ")}}var X=(()=>{class t{constructor(){this._CommentsService=h(T),this.commentsList=[]}sendComment(){this._CommentsService.createComment(this.commentGroup.value).subscribe({next:e=>{console.log(e),this.commentsList=e.comments.reverse(),this.commentGroup.get("content")?.reset()}})}ngOnInit(){this.commentGroup=new N({content:new u(null),post:new u(this.postId)}),this._CommentsService.getPostComments(this.postId).subscribe({next:e=>{console.log(`postId ${this.postId}`,e),this.commentsList=e.comments.reverse()}})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=C({type:t,selectors:[["app-comments"]],inputs:{postId:"postId"},standalone:!0,features:[I],decls:14,vars:1,consts:[[1,"flex","flex-col","gap-4"],[1,"comments"],[1,"bg-gray-200","p-3","rounded-md","border","mt-3"],[3,"ngSubmit","formGroup"],["for","chat",1,"sr-only"],[1,"flex","items-center","px-3","py-2","rounded-lg","bg-gray-50","dark:bg-gray-700"],["formControlName","content","id","chat","rows","1","placeholder","Your comment...",1,"block","mx-4","p-2.5","w-full","text-sm","text-gray-900","bg-white","rounded-lg","border","border-gray-300","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-800","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["type","submit",1,"inline-flex","justify-center","p-2","text-blue-600","rounded-full","cursor-pointer","hover:bg-blue-100","dark:text-blue-500","dark:hover:bg-gray-600"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 18 20",1,"w-5","h-5","rotate-90","rtl:-rotate-90"],["d","m17.914 18.594-8-18a1 1 0 0 0-1.828 0l-8 18a1 1 0 0 0 1.157 1.376L8 18.281V9a1 1 0 0 1 2 0v9.281l6.758 1.689a1 1 0 0 0 1.156-1.376Z"],[1,"sr-only"],[1,"flex","items-center","gap-3"],["alt","Commentor image",1,"w-10","h-10","rounded-full",3,"src"],[1,"font-medium"],[1,"text-gray-500","font-light"],[1,"text-gray-600","mt-4"]],template:function(n,c){n&1&&(o(0,"section",0)(1,"div",1),y(2,A,10,6,"div",2,V),r(),o(4,"form",3),_("ngSubmit",function(){return c.sendComment()}),o(5,"label",4),m(6,"Your comment"),r(),o(7,"div",5),a(8,"textarea",6),o(9,"button",7),b(),o(10,"svg",8),a(11,"path",9),r(),v(),o(12,"span",10),m(13,"Send comment"),r()()()()()),n&2&&(i(2),S(c.commentsList),i(2),p("formGroup",c.commentGroup))},dependencies:[$,P,j,E,H,L,D,M],styles:[".comments[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}"]})}}return t})();export{X as CommentsComponent};
